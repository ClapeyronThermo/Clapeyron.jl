<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Custom Methods · Clapeyron.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://ypaul21.github.io/Clapeyron.jl/user_guide/custom_methods/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><script src="../../../copy.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/logo.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Clapeyron.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Clapeyron.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../theory/background/">Background</a></li><li><a class="tocitem" href="../basic_usage/">Basic Usage</a></li><li><span class="tocitem">Customization</span><ul><li><a class="tocitem" href="../custom_dtb/">Custom Databases</a></li><li class="is-active"><a class="tocitem" href>Custom Methods</a><ul class="internal"><li><a class="tocitem" href="#Definitions"><span>Definitions</span></a></li><li><a class="tocitem" href="#Custom-initial-guesses-example"><span>Custom initial guesses example</span></a></li><li><a class="tocitem" href="#Custom-volume-solver-example"><span>Custom volume solver example</span></a></li></ul></li><li><a class="tocitem" href="../custom_model/">Custom Models</a></li></ul></li><li><a class="tocitem" href="../../notebook_examples/">Notebook Examples</a></li><li><a class="tocitem" href="../../to-do_list/">To-do list</a></li><li><span class="tocitem">Available EoS</span><ul><li><a class="tocitem" href="../../eos/ideal/">Ideal Models</a></li><li><a class="tocitem" href="../../eos/cubic/">Cubic Models</a></li><li><a class="tocitem" href="../../eos/empiric/">Empiric Helmholtz Models</a></li></ul></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../../api/parameters/">Parameters</a></li><li><a class="tocitem" href="../../api/macros/">Macros</a></li><li><a class="tocitem" href="../../api/properties/">Properties</a></li><li><a class="tocitem" href="../../api/ad/">Automatic Differenciation</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Customization</a></li><li class="is-active"><a href>Custom Methods</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Custom Methods</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ypaul21/Clapeyron.jl/blob/master/docs/src/user_guide/custom_methods.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h2 id="Definitions"><a class="docs-heading-anchor" href="#Definitions">Definitions</a><a id="Definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Definitions" title="Permalink"></a></h2><p>Within <code>Clapeyron</code>, we provide a few methods which we use to obtain thermodynamic properties (you can find out more details on how we implement these methods in our background information):</p><ul><li><code>volume(model, p, T, z)</code>: Obtains the volume of a system at a given temperature, pressure and composition. If the phase is unknown, it will find the vapour and liquid roots and return the one that minimises the Gibbs free energy. This function is called by all of our bulk property methods.</li><li><code>saturation_pressure(model, T)</code>: Obtains the saturation pressures and volumes for a pure species.</li><li><code>crit_pure(model)</code>: Obtains the critical point for a pure species.</li></ul><p>Clearly this is not an exhaustive list and we make absolutely no guarantees as to the quality of these methods. However, if you have a new method or algorithm you would like to implement or test out, it is possible to do so.</p><h2 id="Custom-initial-guesses-example"><a class="docs-heading-anchor" href="#Custom-initial-guesses-example">Custom initial guesses example</a><a id="Custom-initial-guesses-example-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-initial-guesses-example" title="Permalink"></a></h2><p>One of the most common reasons for our methods to fail (that we&#39;ve seen) is due to poor initial guesses. If you are experiencing issues with our <code>saturation_pressure</code> method specifically, you could try modifying the initial guess for a particular equation of state (see the custom models documentation for explanation on abstract types):</p><pre><code class="language-julia hljs">function Clapeyron.x0_sat_pure(model::PCSAFTModel,T,z=SA[1.0])
  # Obtain the volume lower bound for that particular system
  Vlb = lb_volume(model,z)*one(T)
  
  # Relative to the lower bound, define your initial guesses. We log10 the results as our solvers solve for the log10 of the volume.
  return log10.([Vlb*1.5,Vlb*100])
end</code></pre><p>Note that we do need prefix <code>x0_sat_pure</code> with <code>Clapeyron.</code> as we do not export this function normally; including this function in our script with force Clapeyron to use it instead of the default. These modifications can also be done for <code>x0_crit_pure</code> although <code>crit_pure</code> has proven to be quite reliable.</p><h2 id="Custom-volume-solver-example"><a class="docs-heading-anchor" href="#Custom-volume-solver-example">Custom volume solver example</a><a id="Custom-volume-solver-example-1"></a><a class="docs-heading-anchor-permalink" href="#Custom-volume-solver-example" title="Permalink"></a></h2><p>For something a bit more substantial, you can also modify the volume function itself. Since this function is exported in Clapeyron, you do not need to prefix with <code>Clapeyron.</code>:</p><pre><code class="language-julia hljs">function volume(model::EoSModel,p,T,z=SA[1.0];phase=:unknown,threaded=true)
  
  # INSERT YOUR ALGORITHM HERE
  
  return vol
end</code></pre><p>Clapeyron will automatically overwrite the default function and use this one instead. </p><p>If your custom methods end up being more-efficient than ours or you develop one that we do not currently support, please do start a pull request and we will gladly add it to the package!</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../custom_dtb/">« Custom Databases</a><a class="docs-footer-nextpage" href="../custom_model/">Custom Models »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.12 on <span class="colophon-date" title="Wednesday 23 February 2022 05:26">Wednesday 23 February 2022</span>. Using Julia version 1.6.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
